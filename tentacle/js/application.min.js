function update_output(e){var a=e.length?e:$(e.target),s=a.data("output");window.JSON?($data=a.nestable("serialize"),$.post("<?= BASE_URL ?>/ajax/sortable",{data:$data},function(e){console.log(e)})):s.val("JSON browser support required for this demo.")}function setFocus(){document.getElementById("username").focus()}function template(){$(".content-box-header h3").css({cursor:"s-resize"}),$(".closed-box .content-box-content").hide(),$(".closed-box .content-box-tabs").hide(),$(".content-box-header h3").click(function(){$(this).parent().next().toggle(),$(this).parent().parent().toggleClass("closed-box"),$(this).parent().find(".content-box-tabs").toggle()}),$("#content-tabs a").click(function(e){e.preventDefault(),$(this).tab("show")}),$(".close").click(function(){return $(this).parent().fadeTo(400,0,function(){$(this).slideUp(400)}),!1}),$("tbody tr:even").addClass("even"),$(".check-all").click(function(){$(this).parent().parent().parent().parent().find("input[type='checkbox']").attr("checked",$(this).is(":checked"))}),$("body").hasClass("tags")&&$(".tags").tagsInput(),$("body").hasClass("alert-message")&&$(".alert-message").alert(),$("body").hasClass("alert-message")&&$("#my-modal").modal()}function publishedOn(){$(".published-on").hide(),$("#publish").change(function(){var e=$("#publish option:selected").val();"published-on"==e?$(".published-on").show():$(".published-on").hide()}),$("a#edit_publish").click(function(){var e=$("#publish option:selected").val();"published-on"==e?$(".published-on").show():$(".published-on").hide()}),$(".published-on").hide(),$("#edit_publish").show(),$("#edit_publish").click(function(){$(".published-on").toggle()})}function sparkline(){var e={width:150,height:35,lineColor:"#2FABE9",fillColor:"#f2f7f9",spotColor:"#467e8c",maxSpotColor:"#b9e672",minSpotColor:"#FA5833",spotRadius:2,lineWidth:1};$(".page_view").sparkline(page_views,e),$(".page_view").next(".number").text(page_view_total),$(".unique_page_view").sparkline(unique_views,e),$(".unique_page_view").next(".number").text(unique_view_total)}function dashboardFeed(){var e="http://tentaclecms.com/api/feed/json/";$.ajax({url:e,dataType:"jsonp",jsonp:"callback",jsonpCallback:"jsonpcallback",success:function a(e){$.each(e,function(e,a){$(".feed").append('<li><h3><a href="'+a.url+'">'+a.title+"</a></h3><p>"+a.content+' <a href="'+a.url+'"> Read more  Â»</a></p></li>')})},error:function(e){$(".feed").append("<li><h3>"+e.message+"</h3></li>")}})}function usernameCheck(){var e=$("#username").val();""==e||e.length<4?$(".tick").hide():jQuery.ajax({type:"POST",url:base_url+"ajax/unique_user",data:"username="+e,cache:!1,success:function(e){"1"==e?($("#username").css("border","1px #C33 solid"),$(".user_tick").hide(),$(".user_cross").fadeIn(),$("#save").attr("disabled","disabled")):($("#username").css("border","1px #090 solid"),$(".user_cross").hide(),$(".user_tick").fadeIn(),$("#save").removeAttr("disabled"))}})}function useremailCheck(){var e=$("#useremail").val();""==e||e.length<4?$(".email_tick").hide():jQuery.ajax({type:"POST",url:base_url+"ajax/unique_user",data:"username="+e,cache:!1,success:function(e){"1"==e?($("#useremail").css("border","1px #C33 solid"),$(".email_tick").hide(),$(".email_cross").fadeIn(),$("#save").attr("disabled","disabled")):($("#useremail").css("border","1px #090 solid"),$(".email_cross").hide(),$(".email_tick").fadeIn(),$("#save").removeAttr("disabled"))}})}function permalinkCheck(){$slug=$("#permalink").val(),""!=$slug&&jQuery.ajax({type:"POST",dataType:"json",url:base_url+"ajax/unique_uri/"+page_post,data:"uri="+uri+"&slug="+$slug,cache:!1,success:function(e){$("#permalink_landing").html(e.suggested),$("#new_uri").val(e.suggested)}})}$(document).ready(function(){$("body").hasClass("login")&&setFocus(),template(),($("body").hasClass("content_add_post")||$("body").hasClass("content_update_post"))&&publishedOn(),$("body").hasClass("dashboard")&&(dashboardFeed(),sparkline()),$("body").hasClass("admin")&&($("#username").keyup(usernameCheck),$("#useremail").keyup(useremailCheck),$("#permalink").keyup(permalinkCheck)),$("body").hasClass("content_order_page")&&$("#nestableMenu").nestable({group:1}).on("change",update_output)});