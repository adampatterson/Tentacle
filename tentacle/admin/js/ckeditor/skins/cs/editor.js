window.Modernizr=function(a,b,e){function c(a,b){return typeof a===b}function d(a,b){for(var c in a)if(k[a[c]]!==e)return b=="pfx"?a[c]:!0;return!1}function f(a,b){var c=a.charAt(0).toUpperCase()+a.substr(1),c=(a+" "+p.join(c+" ")+c).split(" ");return d(c,b)}function h(){i.input=function(a){for(var b=0,c=a.length;b<c;b++)t[a[b]]=!!(a[b]in l);return t}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));i.inputtypes=function(a){for(var c=0,d,f,g=a.length;c<
g;c++){l.setAttribute("type",f=a[c]);if(d=l.type!=="text")l.value=m,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&l.style.WebkitAppearance!==e?(j.appendChild(l),d=b.defaultView,d=d.getComputedStyle&&d.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0,j.removeChild(l)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?d=l.checkValidity&&l.checkValidity()===!1:/^color$/.test(f)?(j.appendChild(l),d=l.value!=m,j.removeChild(l)):d=l.value!=m);q[a[c]]=
!!d}return q}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var i={},j=b.documentElement;b.head||b.getElementsByTagName("head");var g=b.createElement("modernizr"),k=g.style,l=b.createElement("input"),m=":)",n=Object.prototype.toString,o=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),p="Webkit Moz O ms Khtml".split(" "),r={svg:"http://www.w3.org/2000/svg"},g={},q={},t={},s=[],v,u=function(a,c,d,f){var e,g=b.createElement("div");if(parseInt(d,10))for(;d--;)e=
b.createElement("div"),e.id=f?f[d]:"modernizr"+(d+1),g.appendChild(e);d=["&shy;<style>",a,"</style>"].join("");g.id="modernizr";g.innerHTML+=d;j.appendChild(g);a=c(g,a);g.parentNode.removeChild(g);return!!a},w=function(){var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(d,f){var f=f||b.createElement(a[d]||"div"),d="on"+d,g=d in f;g||(f.setAttribute||(f=b.createElement("div")),f.setAttribute&&f.removeAttribute&&(f.setAttribute(d,""),
g=c(f[d],"function"),c(f[d],e)||(f[d]=e),f.removeAttribute(d)));return g}}(),x={}.hasOwnProperty,y;y=!c(x,e)&&!c(x.call,e)?function(a,b){return x.call(a,b)}:function(a,b){return b in a&&c(a.constructor.prototype[b],e)};(function(c,d){var f=c.join(""),e=d.length;u(f,function(c,d){for(var f=b.styleSheets[b.styleSheets.length-1],f=f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"",g=c.childNodes,h={};e--;)h[g[e].id]=g[e];i.touch="ontouchstart"in a||h.touch.offsetTop===9;i.csstransforms3d=
h.csstransforms3d.offsetLeft===9;i.generatedcontent=h.generatedcontent.offsetHeight>=1;i.fontface=/src/i.test(f)&&f.indexOf(d.split(" ")[0])===0},e,d)})(['@font-face {font-family:"font";src:url("https://")}',["@media (",o.join("touch-enabled),("),"modernizr){#touch{top:9px;position:absolute}}"].join(""),["@media (",o.join("transform-3d),("),"modernizr){#csstransforms3d{left:9px;position:absolute}}"].join(""),['#generatedcontent:after{content:"',m,'";visibility:hidden}'].join("")],["fontface","touch",
"csstransforms3d","generatedcontent"]);g.flexbox=function(){var a=b.createElement("div"),c=b.createElement("div");(function(a,b,c,d){b+=":";a.style.cssText=(b+o.join(c+";"+b)).slice(0,-b.length)+(d||"")})(a,"display","box","width:42px;padding:0;");c.style.cssText=o.join("box-flex:1;")+"width:10px;";a.appendChild(c);j.appendChild(a);var d=c.offsetWidth===42;a.removeChild(c);j.removeChild(a);return d};g.canvas=function(){var a=b.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))};g.canvastext=
function(){return!(!i.canvas||!c(b.createElement("canvas").getContext("2d").fillText,"function"))};g.webgl=function(){return!!a.WebGLRenderingContext};g.touch=function(){return i.touch};g.geolocation=function(){return!!navigator.geolocation};g.postmessage=function(){return!!a.postMessage};g.websqldatabase=function(){return!!a.openDatabase};g.indexedDB=function(){for(var b=-1,c=p.length;++b<c;)if(a[p[b].toLowerCase()+"IndexedDB"])return!0;return!!a.indexedDB};g.hashchange=function(){return w("hashchange",
a)&&(b.documentMode===e||b.documentMode>7)};g.history=function(){return!(!a.history||!history.pushState)};g.draganddrop=function(){return w("dragstart")&&w("drop")};g.websockets=function(){for(var b=-1,c=p.length;++b<c;)if(a[p[b]+"WebSocket"])return!0;return"WebSocket"in a};g.rgba=function(){k.cssText="background-color:rgba(150,255,150,.5)";return!!~(""+k.backgroundColor).indexOf("rgba")};g.hsla=function(){k.cssText="background-color:hsla(120,40%,100%,.5)";return!!~(""+k.backgroundColor).indexOf("rgba")||
!!~(""+k.backgroundColor).indexOf("hsla")};g.multiplebgs=function(){k.cssText="background:url(https://),url(https://),red url(https://)";return/(url\s*\(.*?){3}/.test(k.background)};g.backgroundsize=function(){return f("backgroundSize")};g.borderimage=function(){return f("borderImage")};g.borderradius=function(){return f("borderRadius")};g.boxshadow=function(){return f("boxShadow")};g.textshadow=function(){return b.createElement("div").style.textShadow===""};g.opacity=function(){var a=o.join("opacity:.55;")+
"";k.cssText=a;return/^0.55$/.test(k.opacity)};g.cssanimations=function(){return f("animationName")};g.csscolumns=function(){return f("columnCount")};g.cssgradients=function(){var a=("background-image:"+o.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+o.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,-17);k.cssText=a;return!!~(""+k.backgroundImage).indexOf("gradient")};g.cssreflections=function(){return f("boxReflect")};g.csstransforms=
function(){return!!d(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};g.csstransforms3d=function(){var a=!!d(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);a&&"webkitPerspective"in j.style&&(a=i.csstransforms3d);return a};g.csstransitions=function(){return f("transitionProperty")};g.fontface=function(){return i.fontface};g.generatedcontent=function(){return i.generatedcontent};g.video=function(){var a=b.createElement("video"),
c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"'),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"')||a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"')}catch(d){}return c};g.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"'),c.mp3=a.canPlayType("audio/mpeg;"),c.wav=a.canPlayType('audio/wav; codecs="1"'),
c.m4a=a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")}catch(d){}return c};g.localstorage=function(){try{return!!localStorage.getItem}catch(a){return!1}};g.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(a){return!1}};g.webworkers=function(){return!!a.Worker};g.applicationcache=function(){return!!a.applicationCache};g.svg=function(){return!!b.createElementNS&&!!b.createElementNS(r.svg,"svg").createSVGRect};g.inlinesvg=function(){var a=b.createElement("div");a.innerHTML=
"<svg/>";return(a.firstChild&&a.firstChild.namespaceURI)==r.svg};g.smil=function(){return!!b.createElementNS&&/SVG/.test(n.call(b.createElementNS(r.svg,"animate")))};g.svgclippaths=function(){return!!b.createElementNS&&/SVG/.test(n.call(b.createElementNS(r.svg,"clipPath")))};for(var z in g)y(g,z)&&(v=z.toLowerCase(),i[v]=g[z](),s.push((i[v]?"":"no-")+v));i.input||h();i.addTest=function(a,b){if(typeof a=="object")for(var c in a)y(a,c)&&i.addTest(c,a[c]);else{a=a.toLowerCase();if(i[a]!==e)return;b=
typeof b=="boolean"?b:!!b();j.className+=" "+(b?"":"no-")+a;i[a]=b}return i};k.cssText="";g=l=null;a.attachEvent&&function(){var a=b.createElement("div");a.innerHTML="<elem></elem>";return a.childNodes.length!==1}()&&function(a,b){function c(a){for(var b=-1;++b<h;)a.createElement(g[b])}a.iepp=a.iepp||{};var d=a.iepp,f=d.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",g=f.split("|"),h=
g.length,i=RegExp("(^|\\s)("+f+")","gi"),k=RegExp("<(/*)("+f+")","gi"),j=/^\s*[\{\}]\s*$/,l=RegExp("(^|[^\\n]*?\\s)("+f+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),m=b.createDocumentFragment(),o=b.documentElement,f=o.firstChild,p=b.createElement("body"),n=b.createElement("style"),x=/print|all/,r;d.getCSS=function(a,b){if(a+""===e)return"";for(var c=-1,f=a.length,g,h=[];++c<f;)g=a[c],g.disabled||(b=g.media||b,x.test(b)&&h.push(d.getCSS(g.imports,b),g.cssText),b="all");return h.join("")};d.parseCSS=function(a){for(var b=
[],c;(c=l.exec(a))!=null;)b.push(((j.exec(c[1])?"\n":c[1])+c[2]+c[3]).replace(i,"$1.iepp_$2")+c[4]);return b.join("\n")};d.writeHTML=function(){var a=-1;for(r=r||b.body;++a<h;)for(var c=b.getElementsByTagName(g[a]),d=c.length,f=-1;++f<d;)c[f].className.indexOf("iepp_")<0&&(c[f].className+=" iepp_"+g[a]);m.appendChild(r);o.appendChild(p);p.className=r.className;p.id=r.id;p.innerHTML=r.innerHTML.replace(k,"<$1font")};d._beforePrint=function(){n.styleSheet.cssText=d.parseCSS(d.getCSS(b.styleSheets,"all"));
d.writeHTML()};d.restoreHTML=function(){p.innerHTML="";o.removeChild(p);o.appendChild(r)};d._afterPrint=function(){d.restoreHTML();n.styleSheet.cssText=""};c(b);c(m);if(!d.disablePP)f.insertBefore(n,f.firstChild),n.media="print",n.className="iepp-printshim",a.attachEvent("onbeforeprint",d._beforePrint),a.attachEvent("onafterprint",d._afterPrint)}(a,b);i._version="2.0.6";i._prefixes=o;i._domPrefixes=p;i.mq=function(b){if(a.matchMedia)return matchMedia(b).matches;var c;u("@media "+b+" { #modernizr { position: absolute; } }",
function(b){c=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle).position=="absolute"});return c};i.hasEvent=w;i.testProp=function(a){return d([a])};i.testAllProps=f;i.testStyles=u;i.prefixed=function(a){return f(a,"pfx")};j.className=j.className.replace(/\bno-js\b/,"")+(" js "+s.join(" "));return i}(this,this.document);(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=
this.items.length?/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(b,e){b==="disabled"?(this.options[b]=e,this.widget()[e?
"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,e){if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(b);var c=null,d=this;a(b.target).parents().each(function(){if(a.data(this,"sortable-item")==d)return c=a(this),!1});a.data(b.target,"sortable-item")==d&&(c=a(b.target));if(!c)return!1;if(this.options.handle&&!e){var f=!1;a(this.options.handle,c).find("*").andSelf().each(function(){this==
b.target&&(f=!0)});if(!f)return!1}this.currentItem=c;this._removeCurrentsFromItems();return!0},_mouseStart:function(b,e,c){e=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=
this.helper.css("position");a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();
e.containment&&this._setContainment();if(e.cursor){if(a("body").css("cursor"))this._storedCursor=a("body").css("cursor");a("body").css("cursor",e.cursor)}if(e.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",e.opacity)}if(e.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",e.zIndex)}if(this.scrollParent[0]!=this.element[0].ownerDocument&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=
this.scrollParent.offset();this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("activate",b,this._uiHash(this));if(a.ui.ddmanager)a.ui.ddmanager.current=this;a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);return!0},_mouseDrag:function(b){this.position=this._generatePosition(b);
this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var e=this.options,c=!1,d=b.target.ownerDocument;if(this.scrollParent[0]!=d&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+e.scrollSpeed;else if(b.pageY-this.overflowOffset.top<e.scrollSensitivity)this.scrollParent[0].scrollTop=
c=this.scrollParent[0].scrollTop-e.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+e.scrollSpeed;else if(b.pageX-this.overflowOffset.left<e.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-e.scrollSpeed}else b.pageY-a(d).scrollTop()<e.scrollSensitivity?c=a(d).scrollTop(a(d).scrollTop()-e.scrollSpeed):a(d).window().height()-(b.pageY-a(d).scrollTop())<
e.scrollSensitivity&&(c=a(d).scrollTop(a(d).scrollTop()+e.scrollSpeed)),b.pageX-a(d).scrollLeft()<e.scrollSensitivity?c=a(d).scrollLeft(a(d).scrollLeft()-e.scrollSpeed):a(d).window().width()-(b.pageX-a(d).scrollLeft())<e.scrollSensitivity&&(c=a(d).scrollLeft(a(d).scrollLeft()+e.scrollSpeed));c!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+
"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(e=this.items.length-1;e>=0;e--){var c=this.items[e],d=c.item[0],f=this._intersectsWithPointer(c);if(f&&d!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=d&&!a.ui.contains(this.placeholder[0],d)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],d):1)){this.direction=f==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(c))this._rearrange(b,
c);else break;this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,e){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var c=this,d=c.placeholder.offset();c.reverting=!0;a(this.helper).animate({left:d.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==b.target.ownerDocument.body?
0:this.offsetParent[0].scrollLeft),top:d.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==b.target.ownerDocument.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(b)})}else this._clear(b,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)if(this.containers[b]._trigger("deactivate",
null,this._uiHash(this)),this.containers[b].containerCache.over)this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):
a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(b){var e=this._getItemsAsjQuery(b&&b.connected),c=[],b=b||{};a(e).each(function(){var d=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);d&&c.push((b.key||d[1]+"[]")+"="+(b.key&&b.expression?d[1]:d[2]))});!c.length&&b.key&&c.push(b.key+"=");return c.join("&")},toArray:function(b){var e=this._getItemsAsjQuery(b&&b.connected),c=[],b=b||{};e.each(function(){c.push(a(b.item||this).attr(b.attribute||
"id")||"")});return c},_intersectsWith:function(a){var e=this.positionAbs.left,c=e+this.helperProportions.width,d=this.positionAbs.top,f=d+this.helperProportions.height,h=a.left,i=h+a.width,j=a.top,g=j+a.height,k=this.offset.click.top,l=this.offset.click.left;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?d+k>j&&d+k<g&&e+l>h&&e+l<i:h<e+this.helperProportions.width/
2&&c-this.helperProportions.width/2<i&&j<d+this.helperProportions.height/2&&f-this.helperProportions.height/2<g},_intersectsWithPointer:function(b){var e=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=e&&b,b=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return!e?!1:this.floating?c&&c=="right"||b=="down"?2:1:b&&(b=="down"?2:1)},_intersectsWithSides:function(b){var e=
a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),c=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return this.floating&&d?d=="right"&&b||d=="left"&&!b:c&&(c=="down"&&e||c=="up"&&!e)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-
this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var e=[],c=[],d=this._connectWith();if(d&&b)for(b=d.length-1;b>=0;b--)for(var f=a(d[b]),h=f.length-1;h>=0;h--){var i=a.data(f[h],"sortable");i&&i!=this&&!i.options.disabled&&c.push([a.isFunction(i.options.items)?i.options.items.call(i.element):
a(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i])}c.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=c.length-1;b>=0;b--)c[b][0].each(function(){e.push(this)});return a(e)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data(sortable-item)"),e=0;e<this.items.length;e++)for(var c=
0;c<a.length;c++)a[c]==this.items[e].item[0]&&this.items.splice(e,1)},_refreshItems:function(b){this.items=[];this.containers=[this];var e=this.items,c=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],d=this._connectWith();if(d)for(var f=d.length-1;f>=0;f--)for(var h=a(d[f]),i=h.length-1;i>=0;i--){var j=a.data(h[i],"sortable");j&&j!=this&&!j.options.disabled&&(c.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],
b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}for(f=c.length-1;f>=0;f--){b=c[f][1];d=c[f][0];i=0;for(h=d.length;i<h;i++)j=a(d[i]),j.data("sortable-item",b),e.push({item:j,instance:b,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();for(var e=this.items.length-1;e>=0;e--){var c=this.items[e];if(!(c.instance!=this.currentContainer&&this.currentContainer&&c.item[0]!=this.currentItem[0])){var d=
this.options.toleranceElement?a(this.options.toleranceElement,c.item):c.item;if(!b)c.width=d.outerWidth(),c.height=d.outerHeight();d=d.offset();c.left=d.left;c.top=d.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;e>=0;e--)d=this.containers[e].element.offset(),this.containers[e].containerCache.left=d.left,this.containers[e].containerCache.top=d.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),
this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(b){var e=b||this,c=e.options;if(!c.placeholder||c.placeholder.constructor==String){var d=c.placeholder;c.placeholder={element:function(){var c=a(e.currentItem[0].ownerDocument.createElement(e.currentItem[0].nodeName)).addClass(d||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!d)c.style.visibility="hidden";return c},update:function(a,
b){if(!d||c.forcePlaceholderSize)b.height()||b.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}}}e.placeholder=a(c.placeholder.element.call(e.element,e.currentItem));e.currentItem.after(e.placeholder);c.placeholder.update(e,e.placeholder)},_contactContainers:function(b){for(var e=
null,c=null,d=this.containers.length-1;d>=0;d--)if(!a.ui.contains(this.currentItem[0],this.containers[d].element[0]))if(this._intersectsWith(this.containers[d].containerCache)){if(!e||!a.ui.contains(this.containers[d].element[0],e.element[0]))e=this.containers[d],c=d}else if(this.containers[d].containerCache.over)this.containers[d]._trigger("out",b,this._uiHash(this)),this.containers[d].containerCache.over=0;if(e)if(this.containers.length===1)this.containers[c]._trigger("over",b,this._uiHash(this)),
this.containers[c].containerCache.over=1;else if(this.currentContainer!=this.containers[c]){for(var e=1E4,d=null,f=this.positionAbs[this.containers[c].floating?"left":"top"],h=this.items.length-1;h>=0;h--)if(a.ui.contains(this.containers[c].element[0],this.items[h].item[0])){var i=this.items[h][this.containers[c].floating?"left":"top"];Math.abs(i-f)<e&&(e=Math.abs(i-f),d=this.items[h])}if(d||this.options.dropOnEmpty)this.currentContainer=this.containers[c],d?this._rearrange(b,d,null,!0):this._rearrange(b,
null,this.containers[c].element,!0),this._trigger("change",b,this._uiHash()),this.containers[c]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[c]._trigger("over",b,this._uiHash(this)),this.containers[c].containerCache.over=1}},_createHelper:function(b){var e=this.options,b=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[b,this.currentItem])):e.helper=="clone"?this.currentItem.clone():this.currentItem;b.parents("body").length||
a(e.appendTo!="parent"?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);if(b[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};(b[0].style.width==""||e.forceHelperSize)&&b.width(this.currentItem.width());(b[0].style.height==""||e.forceHelperSize)&&b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){typeof b==
"string"&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});if("left"in b)this.offset.click.left=b.left+this.margins.left;if("right"in b)this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;if("top"in b)this.offset.click.top=b.top+this.margins.top;if("bottom"in b)this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition==
"absolute"&&this.scrollParent[0]!=this.element[0].ownerDocument&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==this.element[0].ownerDocument.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options,e;if(b.containment=="parent")b.containment=this.helper[0].parentNode;if(b.containment=="document"||b.containment=="window")e=b.containment==="document"?a(this.element[0].ownerDocument):this.element.window(),this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e.width()-this.helperProportions.width-this.margins.left,(e.height()||
this.element[0].ownerDocument.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){e=a(b.containment)[0];var b=a(b.containment).offset(),c=a(e).css("overflow")!="hidden";this.containment=[b.left+(parseInt(a(e).css("borderLeftWidth"),10)||0)+(parseInt(a(e).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(e).css("borderTopWidth"),10)||0)+(parseInt(a(e).css("paddingTop"),10)||0)-this.margins.top,b.left+(c?Math.max(e.scrollWidth,
e.offsetWidth):e.offsetWidth)-(parseInt(a(e).css("borderLeftWidth"),10)||0)-(parseInt(a(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(c?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(a(e).css("borderTopWidth"),10)||0)-(parseInt(a(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,e){if(!e)e=this.position;var c=b=="absolute"?1:-1,d=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=
this.element[0].ownerDocument&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(d[0].tagName);return{top:e.top+this.offset.relative.top*c+this.offset.parent.top*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:d.scrollTop())*c),left:e.left+this.offset.relative.left*c+this.offset.parent.left*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():
f?0:d.scrollLeft())*c)}},_generatePosition:function(b){var e=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=b.target.ownerDocument&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,d=/(html|body)/i.test(c[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();var f=b.pageX,h=b.pageY;this.originalPosition&&(this.containment&&
(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(h=this.containment[3]+this.offset.click.top)),e.grid&&(h=this.originalPageY+Math.round((h-this.originalPageY)/e.grid[1])*e.grid[1],h=this.containment?!(h-
this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h:!(h-this.offset.click.top<this.containment[1])?h-e.grid[1]:h+e.grid[1]:h,f=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-e.grid[0]:f+e.grid[0]:f));return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+
(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():d?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():d?0:c.scrollLeft())}},_rearrange:function(a,e,c,d){c?c[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?e.item[0]:e.item[0].nextSibling);
this.counter=this.counter?++this.counter:1;var f=this,h=this.counter;window.setTimeout(function(){h==f.counter&&f.refreshPositions(!d)},0)},_clear:function(b,e){this.reverting=!1;var c=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var d in this._storedCSS)if(this._storedCSS[d]=="auto"||this._storedCSS[d]=="static")this._storedCSS[d]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();
this.fromOutside&&!e&&c.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!e&&c.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){e||c.push(function(a){this._trigger("remove",a,this._uiHash())});for(d=this.containers.length-1;d>=0;d--)a.ui.contains(this.containers[d].element[0],
this.currentItem[0])&&!e&&(c.push(function(a){return function(c){a._trigger("receive",c,this._uiHash(this))}}.call(this,this.containers[d])),c.push(function(a){return function(c){a._trigger("update",c,this._uiHash(this))}}.call(this,this.containers[d])))}for(d=this.containers.length-1;d>=0;d--)if(e||c.push(function(a){return function(c){a._trigger("deactivate",c,this._uiHash(this))}}.call(this,this.containers[d])),this.containers[d].containerCache.over)c.push(function(a){return function(c){a._trigger("out",
c,this._uiHash(this))}}.call(this,this.containers[d])),this.containers[d].containerCache.over=0;this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",b,this._uiHash());for(d=0;d<c.length;d++)c[d].call(this,b);this._trigger("stop",b,this._uiHash())}return!1}e||
this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!e){for(d=0;d<c.length;d++)c[d].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var e=b||this;return{helper:e.helper,placeholder:e.placeholder||a([]),position:e.position,
originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:b?b.element:null}}});a.extend(a.ui.sortable,{version:"@VERSION"})})(jQuery);(function(a){function b(b,c){function d(){p.obj.bind("mousedown",f);p.obj[0].ontouchstart=function(a){a.preventDefault();p.obj.unbind("mousedown");f(a.touches[0]);return!1};o.obj.bind("mouseup",j);if(c.scroll&&this.addEventListener)k[0].addEventListener("DOMMouseScroll",h,!1),k[0].addEventListener("mousewheel",h,!1);else if(c.scroll)k[0].onmousewheel=h}function f(c){u.start=r?c.pageX:c.pageY;c=parseInt(p.obj.css(q));v.start=c=="auto"?0:c;a(document).bind("mousemove",j);document.ontouchmove=function(c){a(document).unbind("mousemove");
j(c.touches[0])};a(document).bind("mouseup",i);p.obj.bind("mouseup",i);p.obj[0].ontouchend=document.ontouchend=function(c){a(document).unbind("mouseup");p.obj.unbind("mouseup");i(c.touches[0])};return!1}function h(b){m.ratio>=1||(b=a.event.fix(b||window.event),s-=(b.wheelDelta?b.wheelDelta/120:-b.detail/3)*c.wheel,s=Math.min(m[c.axis]-l[c.axis],Math.max(0,s)),p.obj.css(q,s/n.ratio),m.obj.css(q,-s),m.obj.trigger("scroll"),b.preventDefault())}function i(){a(document).unbind("mousemove",j);a(document).unbind("mouseup",
i);p.obj.unbind("mouseup",i);document.ontouchmove=p.obj[0].ontouchend=document.ontouchend=null;return!1}function j(a){if(!(m.ratio>=1))v.now=Math.min(o[c.axis]-p[c.axis],Math.max(0,v.start+((r?a.pageX:a.pageY)-u.start))),s=v.now*n.ratio,m.obj.css(q,-s),p.obj.css(q,v.now),m.obj.trigger("scroll");return!1}var g=this,k=b,l={obj:a(".viewport",b)},m={obj:a(".overview",b)},n={obj:a(".scrollbar",b)},o={obj:a(".track",n.obj)},p={obj:a(".thumb",n.obj)},r=c.axis=="x",q=r?"left":"top",t=r?"Width":"Height",s,
v={start:0,now:0},u={};this.update=function(a){var d,f,g=t.toLowerCase();l[c.axis]=l.obj[0]["offset"+t];m[c.axis]=m.obj[0]["scroll"+t];m.ratio=l[c.axis]/m[c.axis];d=m.ratio<1;f=!n.obj.hasClass("disable");d!==f&&(n.obj.toggleClass("disable",!d),b.trigger("scrollbarVisibility",[d]));d=p.obj.position()[q];f=d/(o[c.axis]-p.obj[g]());o[c.axis]=c.size=="auto"?l[c.axis]:c.size;p[c.axis]=Math.min(o[c.axis],Math.max(0,c.sizethumb=="auto"?o[c.axis]*m.ratio:c.sizethumb));n.ratio=c.sizethumb=="auto"?m[c.axis]/
o[c.axis]:(m[c.axis]-l[c.axis])/(o[c.axis]-p[c.axis]);n.obj.css(g,o[c.axis]);o.obj.css(g,o[c.axis]);p.obj.css(g,p[c.axis]);m.ratio>1?s=0:(a==="relative"&&m.ratio<=1&&(s=d===0?0:(o[c.axis]-p[c.axis])*f*n.ratio),s=a=="bottom"&&m.ratio<=1?m[c.axis]-l[c.axis]:isNaN(parseInt(a))?s:parseInt(a));p.obj.css(q,s/n.ratio);m.obj.css(q,-s);m.obj.trigger("scroll");u.start=p.obj.offset()[q]};return function(){b.bind("sizeChanged",function(a,c){g.update(c||"relative")});g.update();d();return g}()}a.fn.tinyscrollbar=
function(e){e=a.extend({},a.fn.tinyscrollbar.defaults,e);this.each(function(){a(this).data("tsb",new b(a(this),e))});return this};a.fn.tinyscrollbar.defaults={axis:"y",wheel:40,scroll:!0,size:"auto",sizethumb:"auto"}})(jQuery);(function(a){function b(a){return typeof a=="object"?a:{top:a,left:a}}var e=a.scrollTo=function(c,b,f){a(window).scrollTo(c,b,f)};e.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1};e.window=function(){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])==-1)return this;var c=(this.contentWindow||this).document||this.ownerDocument||this;return a.browser.safari||
c.compatMode=="BackCompat"?c.body:c.documentElement})};a.fn.scrollTo=function(c,d,f){typeof d=="object"&&(f=d,d=0);typeof f=="function"&&(f={onAfter:f});c=="max"&&(c=9E9);f=a.extend({},e.defaults,f);d=d||f.speed||f.duration;f.queue=f.queue&&f.axis.length>1;f.queue&&(d/=2);f.offset=b(f.offset);f.over=b(f.over);return this._scrollable().each(function(){function h(a){j.animate(l,d,f.easing,a&&function(){a.call(this,c,f)})}var i=this,j=a(i),g=c,k,l={},m=j.is("html,body");switch(typeof g){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(g)){g=
b(g);break}g=a(g,this);case "object":if(g.is||g.style)k=(g=a(g)).offset()}a.each(f.axis.split(""),function(a,c){var b=c=="x"?"Left":"Top",d=b.toLowerCase(),q="scroll"+b,t=i[q],s=e.max(i,c);k?(l[q]=k[d]+(m?0:t-j.offset()[d]),f.margin&&(l[q]-=parseInt(g.css("margin"+b))||0,l[q]-=parseInt(g.css("border"+b+"Width"))||0),l[q]+=f.offset[d]||0,f.over[d]&&(l[q]+=g[c=="x"?"width":"height"]()*f.over[d])):(b=g[d],l[q]=b.slice&&b.slice(-1)=="%"?parseFloat(b)/100*s:b);/^\d+$/.test(l[q])&&(l[q]=l[q]<=0?0:Math.min(l[q],
s));!a&&f.queue&&(t!=l[q]&&h(f.onAfterFirst),delete l[q])});h(f.onAfter)}).end()};e.max=function(c,b){var f=b=="x"?"Width":"Height",e="scroll"+f;if(!a(c).is("html,body"))return c[e]-a(c)[f.toLowerCase()]();var f="client"+f,i=c.ownerDocument.documentElement,j=c.ownerDocument.body;return Math.max(i[e],j[e])-Math.min(i[f],j[f])}})(jQuery);(function(a){function b(c,b,d,f){f={data:f||(b?b.data:{}),_wrap:b?b._wrap:null,tmpl:null,parent:b||null,nodes:[],calls:j,nest:g,wrap:k,html:l,update:m};c&&a.extend(f,c,{nodes:[],parent:b});if(d)f.tmpl=d,f._ctnt=f._ctnt||f.tmpl(a,f),f.key=++v,(w.length?q:r)[v]=f;return f}function e(b,d,f){var g,f=f?a.map(f,function(a){return typeof a==="string"?b.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+o+'="'+b.key+'" $2'):a:e(a,b,a._ctnt)}):b;if(d)return f;f=f.join("");f.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,
function(b,d,f,e){g=a(f).get();i(g);d&&(g=c(d).concat(g));e&&(g=g.concat(c(e)))});return g?g:c(f)}function c(b){var c=document.createElement("div");c.innerHTML=b;return a.makeArray(c.childNodes)}function d(b){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(b,c,d,f,e,g,i){b=a.tmpl.tag[d];if(!b)throw"Template command not found: "+d;d=b._default||[];g&&!/\w$/.test(e)&&(e+=g,g="");e?(e=h(e),i=i?","+h(i)+")":g?")":"",i=g?e.indexOf(".")>-1?e+g:"("+e+").call($item"+i:e,g=g?i:"(typeof("+e+")==='function'?("+e+").call($item):("+e+"))"):g=i=d.$1||"null";f=h(f);return"');"+b[c?"close":"open"].split("$notnull_1").join(e?"typeof("+e+")!=='undefined' && ("+e+")!=null":"true").split("$1a").join(g).split("$1").join(i).split("$2").join(f?f.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,
function(a,b,c,d){return(d=d?","+d+")":c?")":"")?"("+b+").call($item"+d:a}):d.$2||"")+"_.push('"})+"');}return _;")}function f(b,c){b._wrap=e(b,!0,a.isArray(c)?c:[p.test(c)?c:a(c).html()]).join("")}function h(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function i(c){function d(c){function e(a){var x;a+=f;x=i[a]=i[a]||b(k,r[k.parent.key+f]||k.parent,null,!0),k=x}var g,h=c,k,j;if(j=c.getAttribute(o)){for(;h.parentNode&&(h=h.parentNode).nodeType===1&&!(g=h.getAttribute(o)););if(g!==
j){h=h.parentNode?h.nodeType===11?0:h.getAttribute(o)||0:0;if(!(k=r[j]))k=q[j],k=b(k,r[h]||q[h],null,!0),k.key=++v,r[v]=k;u&&e(j)}c.removeAttribute(o)}else if(u&&(k=a.data(c,"tmplItem")))e(k.key),r[k.key]=k,h=(h=a.data(c.parentNode,"tmplItem"))?h.key:0;if(k){for(g=k;g&&g.key!=h;)g.nodes.push(c),g=g.parent;delete k._ctnt;delete k._wrap;a.data(c,"tmplItem",k)}}var f="_"+u,e,g,i={},h,k,j;h=0;for(k=c.length;h<k;h++)if((e=c[h]).nodeType===1){g=e.getElementsByTagName("*");for(j=g.length-1;j>=0;j--)d(g[j]);
d(e)}}function j(a,c,b,d){if(!a)return w.pop();w.push({_:a,tmpl:c,item:this,data:b,options:d})}function g(c,b,d){return a.tmpl(a.template(c),b,d,this)}function k(c,b){var d=c.options||{};d.wrapped=b;return a.tmpl(a.template(c.tmpl),c.data,d,c.item)}function l(c,b){var d=this._wrap;return a.map(a(a.isArray(d)?d.join(""):d).filter(c||"*"),function(a){if(b)a=a.innerText||a.textContent;else{var c;if(!(c=a.outerHTML))c=document.createElement("div"),c.appendChild(a.cloneNode(!0)),c=c.innerHTML;a=c}return a})}
function m(){var c=this.nodes;a.tmpl(null,null,null,this).insertBefore(c[0]);a(c).remove()}var n=a.fn.domManip,o="_tmplitem",p=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,r={},q={},t,s={key:0,data:{}},v=0,u=0,w=[];a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,b){a.fn[c]=function(d){var f=[],d=a(d),e,g,i;e=this.length===1&&this[0].parentNode;t=r||{};if(e&&e.nodeType===11&&e.childNodes.length===1&&d.length===1)d[b](this[0]),f=this;
else{g=0;for(i=d.length;g<i;g++)u=g,e=(g>0?this.clone(!0):this).get(),a.fn[b].apply(a(d[g]),e),f=f.concat(e);u=0;f=this.pushStack(f,c,d.selector)}d=t;t=null;a.tmpl.complete(d);return f}});a.fn.extend({tmpl:function(c,b,d){return a.tmpl(this[0],c,b,d)},tmplItem:function(){return a.tmplItem(this[0])},template:function(c){return a.template(c,this[0])},domManip:function(c,b,d){if(c[0]&&c[0].nodeType){for(var f=a.makeArray(arguments),e=c.length,g=0,i;g<e&&!(i=a.data(c[g++],"tmplItem")););e>1&&(f[0]=[a.makeArray(c)]);
i&&u&&(f[2]=function(c){a.tmpl.afterManip(this,c,d)});n.apply(this,f)}else n.apply(this,arguments);u=0;!t&&a.tmpl.complete(r);return this}});a.extend({tmpl:function(c,d,g,i){var h=!i;if(h)i=s,c=a.template[c]||a.template(null,c),q={};else if(!c)return c=i.tmpl,r[i.key]=i,i.nodes=[],i.wrapped&&f(i,i.wrapped),a(e(i,null,i.tmpl(a,i)));if(!c)return[];typeof d==="function"&&(d=d.call(i||{}));g&&g.wrapped&&f(g,g.wrapped);d=a.isArray(d)?a.map(d,function(a){return a?b(g,i,c,a):null}):[b(g,i,c,d)];return h?
a(e(i,null,d)):d},tmplItem:function(c){var b;for(c instanceof a&&(c=c[0]);c&&c.nodeType===1&&!(b=a.data(c,"tmplItem"))&&(c=c.parentNode););return b||s},template:function(c,b){return b?(typeof b==="string"?b=d(b):b instanceof a&&(b=b[0]||{}),b.nodeType&&(b=a.data(b,"tmpl")||a.data(b,"tmpl",d(b.innerHTML))),typeof c==="string"?a.template[c]=b:b):c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,p.test(c)?c:a(c)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});
a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},
open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){r={}},afterManip:function(c,b,d){var f=b.nodeType===11?a.makeArray(b.childNodes):b.nodeType===1?[b]:[];d.call(c,b);i(f);u++}})})(jQuery);(function(a){a.fn.postFile=function(b){var e=this,c,d,b=a.extend({complete:a.noop,progress:a.noop},b);CS.hasFileAPI?(c=e.get(0).files[0],d={},b.additional&&a.each(b.additional,function(a,c){d["X-"+a]=c}),a.ajax({type:"POST",url:b.url,data:c,processData:!1,contentType:"X-Fileupload",dataType:"json",headers:d,success:b.complete,xhr:function(){var a=new XMLHttpRequest;a.upload.onprogress=b.progress;return a}})):(b.progress("indeterminate"),b.additional&&(b.url+="?"+a.param(b.additional)),e.attr("name",
"fileupload_"+Math.round(Math.random()*1E6)).wrap('<form method="POST" action="'+b.url+'" enctype="multipart/form-data" />'),c=e.parent(),c.ajaxUpload({onComplete:function(a){setTimeout(function(){e.unwrap()},200);b.complete(a)}}),c.submit())}})(jQuery);(function(a){var b={indeterminate:function(){return this.width("100%")},stop:function(){return this.stop().css("margin-left",0).width(0)}};a.fn.progress=function(){return this.apply(arguments,b,function(a){var c=this.parent().width();return this.animate({width:a*c},{duration:"fast"})})}})(jQuery);(function(a){a.anyClick=function(b,e){var c=a(document).add(a("iframe").contents());b?(c.first().click(),c.bind("click.anyclick",function(c,b){return function(e){if(!b||!(e.target===b.target||e.originalEvent===b.originalEvent||e.timeStamp-b.timeStamp<200))c(),a.anyClick()}}(b,e))):c.unbind("click.anyclick")}})(jQuery);(function(a){a.fn.blocklinks=function(){return this.delegate("a,area","click",function(b){var e=a(this).attr("href");if(!b.isDefaultPrevented()&&!e.startsWith("mailto:")){if(e.startsWith("#")){var c=this.ownerDocument,d;e==="#"?d=0:(d=a(e,c),d.length===0&&e.length>1&&(d=a('a[name="'+e.substring(1)+'"]',c)),d=d.first());(d===0||d.length)&&a(c).scrollTo(d,{duration:300,easing:"easeInOutCubic"})}else window.open(e,"preview","height=580,width=700,resizable=yes,scrollbars=yes,menubar=yes,toolbar=yes");
b.preventDefault();b.stopPropagation()}})}})(jQuery);(function(a,b){var e={wrapper:function(){var a=this.closest(".cs-it-wrap, [data-it-index]"),b;return a.is(".cs-it-wrap")?a.filter(".cs-it-wrap"):(b=a.data("it-index"),a.prevAll('.cs-it-wrap[data-it-index="'+b+'"]'))},prev:function(){var a=this.itemgroup("wrapper"),b=".cs-it-wrap";this.is("[data-it-index]")&&(b+='[data-it-index!="'+this.data("it-index")+'"]');a.is("[data-rp-index]")&&(b+='[data-rp-index="'+a.data("rp-index")+'"]');return this.prev(b)},after:function(a){var b;return this.is("[data-it-index]")?
(b=this.data("it-index"),this.nextAll('[data-it-index="'+b+'"]').last().after(a)):this.after(a)}};a.fn.itemgroup=function(){return this.apply(arguments,e,function(){var a=this.closest(".cs-it-wrap,[data-it-index]"),d=a.data("it-index");return d===b?a:a.closest(".cs-rp-wrap").find('[data-it-index="'+d+'"]')})}})(jQuery);(function(a,b){var e={items:function(a){var d=this.find(".cs-it-wrap:not(.cs-add-placeholder)");a!==b&&(d=d.not(this.find(".cs-rp-wrap .cs-it-wrap")).filter('[data-rp-index="'+a+'"]'));return d}};a.fn.repeater=function(){return this.apply(arguments,e,a.noop)}})(jQuery);(function(a){function b(b,c){var d=0;b.children("li").children("a").each(function(b,e){var i;c.text(a(e).text());i=c.width();i>d&&(d=i)});return d+30}a.fn.dynamicWidth=function(){var e;e=a("<span />",{css:{position:"absolute",top:"-999px"}}).appendTo("body");this.width(function(){return b(a(this),e)});return this}})(jQuery);(function(a){function b(c,b){var f;if(a("#templateiframe").is(":visible")===b){f=a("#editorPane");if(b&&f.is(".active:visible")){if(f.editor("dirty")){if(!f.editor("confirmDestroy")){c.preventDefault();return}}else f.editor("destroy",!0);f.trigger("hide")}e(!b);a("#templateiframe,#previewiframe,#stepBack .byline, #stepForward .byline,#editorStatus .byline").toggle();a(".updating").toggleClass("preview");c.preventDefault()}}function e(b){var d=a("#editorPane"),f=a("#previewPane"),e=d.window().width(),
b=b||!1;b!==d.is(":visible")&&(b?d.show():d.css("min-width",0),d.animate({width:b?400:0},{duration:b?100:300,step:function(a){f.css({width:e-a,left:a})},complete:function(){b?d.css("min-width",400):d.hide()}}))}a.fn.controls=function(){var c=this,d=c.find("#editorPane"),f=c.find("#stepAttenuator"),e=d.find("#editorHeader");c.find("#stepBack").click(function(a){b(a,!1)});c.find("#stepForward").click(function(a){b(a,!0)});d.find(".cancelButton").click(function(a){d.editor("destroy",!0);d.trigger("hide");
a.preventDefault()});d.find(".saveButton").click(function(a){d.trigger("cancelUndo");d.trigger("save");d.editor("destroy");d.trigger("hide");a.preventDefault()});c.find(".undo").click(function(a){d.trigger("undo");a.preventDefault()});d.window().resize(function(){var b=d.is(":visible")?d.width():0,j=a(this),g=j.height()-f.height(),k=g-e.height(),l=CS.Editor.ckConfig,m=Math.min(l.autoGrow_absoluteMax,Math.max(k-100,l.autoGrow_minHeight));c.find("#previewPane").css({width:j.width()-b,height:g,left:b});
d.find(".viewport").height(k);l.autogrow_maxHeight=m;a.each(CKEDITOR.instances,function(a,b){b.config.autoGrow_maxHeight=m;b.execCommand("autogrow")});d.trigger("sizeChanged")}).resize();d.bind("sizeChanged",function(){var a=Math.min(d.find(".overview").height(),d.find(".viewport").height());e.css("top",a)});d.bind("scroll",function(){d.find(".dropDown").trigger("position")}).trigger("scroll");return c}})(jQuery);(function(a){function b(b,c){b[c.htmlEncode()]||a.each(b,function(a){if(a.htmlDecode()===c)return c=a,!1});return c}a.fn.layout=function(a,c){var d=this.closest(".cs-rp-wrap"),f=d.data("model"),h=!d.is("span"),i="last-layout";h&&(f=f[this.data("rp-index")]);return a?(c?c=b(f,c):(h&&(i+="-rp-"+this.data("rp-index")),c=d.data(i)||this.data("layout"),c=(c+1)%f.length,d.data(i,c)),f[c]):f[this.data("layout")]}})(jQuery);(function(a){var b={name:function(){return this.itemgroup().find('a[name^="toc_item_"]').attr("name")}};a.fn.toc=function(){var e=this;return e.apply(arguments,b,function(){var b=e.find(".cs-toc-wrap");b.length&&e.bind("reorder rebuildToc",function(){var d=e.find(".cs-it-wrap,[data-it-index]").filter(':has(a[name^="toc_item_"])'),f=b.find(".cs-toc-item"),h=a(),i=b.data("model").layout,j=b[0].ownerDocument;d.each(function(b,c){var d=a(c).find('a[name^="toc_item_"]'),f=d.next(".cs-el-wrap"),e=a(i,j);
e.find("repeatertitle").replaceWith('<a href="#'+d.attr("name")+'">'+f.text()+"</a>");h=h.add(e)});h.length||(h=a(i,j),h.find("repeatertitle").remove(),h.hide());f.first().before(h);f.remove()});return e})}})(jQuery);(function(a){function b(c){var d=a(this),f=a(".cs-button-block",d.get(0).ownerDocument).not(d.closest(".cs-button-block"));d.toggleClass("cs-active");d.is(".cs-active")?(f.fadeOut(300),d.next("ul.cs-button-drop").fadeIn(100),a.anyClick(function(){b.call(d)},c)):(f.fadeIn(100),d.next("ul.cs-button-drop").fadeOut(300),a.anyClick())}function e(c){var d=c.itemgroup("wrapper"),f=d.closest(".cs-rp-wrap"),e='<ul class="cs-button-drop">',i=f.data("model");f.is("span")||(i=i[d.data("rp-index")]);a.each(i,
function(a){e+='<li><a href="#">'+a+"</a></li>"});d=a(e+"</ul>",c[0].ownerDocument);a.browser.msie&&d.addClass("ie");d.dynamicWidth();d.find("a").click(function(c){return function(d){c.trigger("add",[a(this).text()]);b.call(c);d.preventDefault()}}(c));d.find("li:first").addClass("cs-first-row");d.find("li:last").addClass("cs-last-row");d.hide();c.after(d)}function c(a,b){var c=b.find("img"),d;d=new Image;d.onload=function(){var b=c.position();b.left+=5+h(c.css("marginLeft"))+h(c.css("paddingLeft"));
b.top+=5+h(c.css("marginTop"))+h(c.css("paddingTop"));b.display="block";a.css(b)};d.src=c.prop("src")}function d(b){var c=b.height();c===0&&b.children().each(function(b,d){c=a(d).outerHeight()});return c}function f(b,c,d){var f=5,e=c.itemgroup("prev"),i;!CS.isIE(7)&&e.length&&(e.append(a("<div />",e[0].ownerDocument).addClass("cs-tmp-clear").css({clear:"both",height:"1px",textOverflow:"none"})),i=e.height(),e.find(".cs-tmp-clear").remove(),i-=e.height(),i>0&&(f+=i));c.is("tr,td,li")?c.find(".cs-table-cell-wrap").length||
(b=b.closest("td,th,li"),c=a("<div />",b[0].ownerDocument).addClass("cs-table-cell-wrap").css({width:"100%",position:"relative"}),b.wrapInner(c)):c.height()===0&&(f+=d);return{top:f,right:5}}function h(a){return(a=a.match(/(\d+)px/))?parseInt(a[1],10):0}var i=[{selector:".cs-edit-content-button",click:function(){a(this).trigger("edit")}},{selector:".cs-delete-content-button",click:function(){a(this).trigger("delete")}},{selector:".cs-add-new-button,.cs-add-new-button-rounded",click:function(){a(this).trigger("add")}},
{selector:".cs-add-new-dropdown,.cs-add-new-dropdown-rounded",click:b,hide:function(){b.call(this.filter(".cs-active"))}},{selector:".cs-move-content-handle",click:function(){}},{selector:".cs-fl-wrap[data-fillerimage] img,.cs-el-wrap[data-fillerimage] img",click:function(){var b=a(this),c=b.closest(".cs-fl-wrap").next(".cs-button-block");c.length||(c=b.itemgroup().find(".cs-button-block"));c.find(".cs-edit-content-button").click()}}],j={width:function(){return a(this).width(function(){var b=a(this),
c=0,d=b.closest(".cs-table-cell-wrap").parent();b.children(":not(.cs-hidden)").each(function(b,d){c+=a(d).outerWidth()});d.width()+5<c?b.css("right",5-c):b.css("right",5);return c})},position:function(){var b=this,e=!0;b.is(".cs-it-wrap")&&(b=b.closest(".cs-rp-wrap").parent(),e=!1);e&&b.find(".cs-fl-wrap").each(function(b,d){var f=a(d),e=f.next(".cs-button-block"),g;switch(f.data("model").type){case "im":c(e,f);return;case "sl":g=f.height();var f=h(f.css("fontSize")),i={top:0};if(g>=f*2)i.right=5;
g=i;break;case "ml":if(i=f.width(),g={top:0},i>=e.width())f=f.parent().width()-i-5-e.width(),g.right=Math.max(5,f)}e.css(g)});b.find(".cs-rp-wrap").each(function(b,c){var e=0;a(c).find(".cs-it-wrap,[data-it-index]").filter(":has(.cs-button-block)").each(function(b,c){var g=a(c),i=g.find(".cs-button-block");i.css(f(i,g,e));e+=d(g)})});b=b.find(".cs-table-cell-wrap .cs-button-block");b.editButtons("width");b.find("img").each(function(){var b=new Image,c=a(this).closest(".cs-button-block");b.onload=
function(){c.editButtons("width")};b.src=this.src})},displaySort:function(b){return this.each(function(c,d){var f=a(d).itemgroup();f.find(".cs-move-content-handle").toggleClass("cs-hidden",!b);f.find(".cs-table-cell-wrap .cs-button-block").editButtons("width")})}};a.fn.editButtons=function(){return this.apply(arguments,j,function(b){var c=this,d;a.each(i,function(a,b){c.find(b.selector).click(b.click).click(function(a){a.preventDefault()})});c.find(".cs-add-new-dropdown,.cs-add-new-dropdown-rounded").each(function(b,
c){e(a(c))});d=c.is(".cs-add-placeholder")?c:c.find(".cs-add-placeholder");d.find(".cs-move-content-handle,.cs-edit-content-button,.cs-delete-content-button").addClass("cs-hidden");d.find(".cs-add-new-dropdown,.cs-add-new-button").each(function(b,c){var d=a(c),f=d.attr("class");d.removeClass(f);d.addClass(f+"-rounded")});c.editButtons("position");if(!b&&!CS.isMobile){var f=function(b,d){var f=a("#editorIntroduction");return CS.isIE(8)?a.noop:function(){f.is(":visible")||c.find(".cs-button-block").stop(!0).fadeTo(b,
d)}};c.find("body").hover(f(100,1),function(){var b=f(500,0.3),d=[];a.each(i,function(a,b){b.hide&&d.push(b)});return function(){b();a.each(d,function(a,b){b.hide.call(c.find(b.selector))})}}());c.bind("delete",function(){c.editButtons("position")})}return c})}})(jQuery);(function(a){function b(b,c,e,j){var g=b.prev(),k=c.find(".cs-add-placeholder"),e=b.layout(!0,e);if(!j.editor("dirty")||j.editor("confirmDestroy"))c.find(".cs-add-placeholder").not(k).remove(),j=a(e.template,b[0].ownerDocument),b.parent().length?b.itemgroup("after",j):g.length?g.itemgroup("after",j):c.prepend(j),j.filter("[data-it-index]").attr("data-it-index","it_index_generated_"+d++),j.find(".cs-el-wrap[data-fillerimage]").each(function(b,c){var d=a(c),f=d.data("fillerimage"),d=d.find("img");d.prop("src").endsWith(f)&&
d.hide()}),e.inTOC&&(c="toc_item_generated_"+d++,e=j.find("a[tocname]"),e.attr("name",c),e.removeAttr("tocname"),j.trigger("rebuildToc")),j.editButtons(!0),j.find(".cs-edit-content-button").click(),b.is(".cs-add-placeholder")&&b.itemgroup().remove()}function e(b){var b=a(b.target).itemgroup("wrapper"),e;b.closest(".cs-rp-wrap").repeater("items",b.data("rp-index")).not(b).length||(e=b.layout(),e=a(e.template,b[0].ownerDocument),e.addClass("cs-add-placeholder"),e.filter("[data-it-index]").attr("data-it-index",
"ph_index_generated_"+d++),b.itemgroup("after",e),e.editButtons(!0),c(e))}function c(a){a.find(":not(:has(.cs-button-block),.cs-button-block,.cs-button-block *)").remove();a.height()<50&&a.height(50)}var d=0;a.fn.addNew=function(d){c(this.find(".cs-add-placeholder"));return this.bind("add",function(c,e){var j=a(c.target).itemgroup("wrapper"),g=j.closest(".cs-rp-wrap");c.repeater=g;c.rpIndex=j.data("rp-index");b(j,g,e,d)}).bind("delete checkplaceholder",e)}})(jQuery);(function(a,b){function e(d,e,h){function i(a){var a=d.repeater("items",a),b=a.length>(e||1),c=a.eq(0).itemgroup().length===1;a.editButtons("displaySort",b&&c);return b}var j;d.is("table,tbody")?h!==b?j=i(h):a.each(d.data("model"),function(a){j=i(a)||j}):j=i();j?d.sortable({handle:".cs-move-content-handle",items:".cs-it-wrap",opacity:0.5,forcePlaceholderSize:!0,placeholder:c(),update:function(b){var c=a.Event("reorder"),d=a(this);if(d.is("table,tbody"))c.repeaterIndex=a(b.toElement).closest(".cs-it-wrap").data("rp-index");
d.trigger(c)}}):d.is(".ui-sortable")&&d.sortable("destroy")}function c(){return{update:a.noop,element:function(b){var c=a(b.get(0)).clone();c.is("tr")?c.find("td").html("&nbsp;"):c.empty();c.attr("style","");c.css({height:b.height(),width:b.width()});c.addClass("ui-state-highlight");return c}}}(function(){var b=a.ui.sortable.prototype,c=b._intersectsWithPointer,e=b._mouseDrag;b._intersectsWithPointer=function(a){var b=c.call(this,a);return b&&a.item.data("rp-index")===this.currentItem.data("rp-index")?
b:!1};b._mouseDrag=function(a){try{e.call(this,a)}catch(b){}}})();a.fn.sort=function(){this.bind("add delete resort",function(c){var f=c.type==="delete",h=a(c.target),i=h.closest(".cs-rp-wrap");if(!i.length)i=c.repeater;e(i,f?2:b,f?h.itemgroup("wrapper").data("rp-index"):b)});return this.find(".cs-rp-wrap").each(function(b,c){e(a(c))})}})(jQuery);(function(a){a.fn.linkPreview=function(){var a=this.data("field").linkData,e=this.find(".label-row");a?(a=a.email?a.email.address:a.href,e.show()):(a="",e.find(".label").text().trim()||e.hide());this.find(".link-preview").html(a).truncate({center:!0,width:200})}})(jQuery);(function(a){function b(a){/^((https?|ftp):\/\/)|\[/i.test(a)||(a="http://"+a);return a}function e(a){var b=this.find("input,textarea"),c;b.val("");if(b.is(":radio"))a?(b.filter("#facebook-url").prop("checked",!0),b.filter(":text").val(a.href).focus()):b.filter("#campaign-url").prop("checked",!0);else if(a&&a.email)for(c in this.find("#modal-tab-email").click(),a.email)b=a.email[c],c!=="address"&&(b=decodeURIComponent(b)),this.find("#email-"+c).val(b);else this.find("#modal-tab-url").click(),this.find("#url-href").val(a?
a.href:"")}function c(){var c=this.find("input:visible,textarea:visible"),d="?",e;c.is(":radio")?(e=null,c.filter(":radio:checked").is("#facebook-url")&&(e={href:b(c.filter(":text").val().trim())})):c.is(".email")?(e={email:{}},e.email.address=c.filter(".email").val().trim(),e.href="mailto:"+e.email.address,a.each(h,function(a,b){var f=c.filter("#email-"+b).val().trim();f&&(e.email[b]=encodeURIComponent(f),e.href+=d+b+"="+e.email[b],d="&")})):e={href:b(c.filter(".url").val().trim())};return e}var d=
"onclose",f={show:function(b){var c=this;a("#curtain").fadeIn(400);e.call(c,b.data);c.data(d,b.onclose).delay(200).fadeIn(200,function(){c.find("input:visible:first").focus()});a(window).bind("keydown.modal",function(a){a.which===27&&c.find(".cancelButton").click()})},hide:function(){a(window).unbind("keydown.modal");this.data(d,a.noop).fadeOut(200);a("#curtain").delay(200).fadeOut(400)}},h=["body","subject"];a.fn.modal=function(){this.apply(arguments,f,function(){function b(c){var e=a(c.target).is("#curtain")?
f.filter(":visible"):a(c.target).closest(".modal");e.data(d)();e.modal("hide");c.preventDefault()}function e(b){var f=a(b.target).closest(".modal");f.data(d)(c.call(f));f.modal("hide");b.preventDefault()}var f=this;f.each(function(){a(this).data(d,a.noop)});f.find(".cancelButton").click(b);a("#curtain").click(b);f.find(".modalHeader a").click(function(b){var c=a(this),d=c.closest(".modal").find("#modal-"+c.data("type"));c.parent().addClass("active").siblings(".active").removeClass("active");d.show().siblings().hide();
d.find("input:first").focus();b.preventDefault()});f.find(".actionButton").click(e);f.find("form").submit(e);f.find("input:radio[data-input]").change(function(){var b=a(this);b.is(":checked")&&a(b.data("input")).focus()});f.find("input:text[data-radio]").focus(function(){var b=a(this),b=a(b.data("radio"));b.is(":checked")||b.prop("checked",!0)});f.delegate("input","keyup",function(){return function(b){var c=a(b.target).closest(".modal");b.which===13&&c.find(".actionButton").click()}}())})}})(jQuery);(function(a){function b(c,f){var h=c.data("model"),i=!c.is("span"),j=c.find(".cs-it-wrap[data-layout]"),g,k,l,m;i&&(k=c.find(".cs-rp-wrap"),j=j.filter("[data-rp-index]").not(k.find(".cs-it-wrap[data-layout]")),m=c.get(0),j=j.add(k.filter(function(){return a(this).parents(".cs-rp-wrap").get(0)===m})));j.each(function(c,d){var j=a(d),k,m,t;j.is(".cs-it-wrap")?(k={layout:j.data("layout"),images:[],singlelines:[],multilines:[]},m=j.data("rp-index"),i?(m!==l&&(l=m,g={items:[]},f.push(g)),t=h[m][k.layout].regions):
(g||(g={items:[]},f.push(g)),t=h[k.layout].regions),j.is(".cs-add-placeholder")||(j.docmodel(k),g.items.push(k),j.itemgroup().find(".cs-el-wrap").each(function(b,c){e(a(c),t[b],k)}))):b(j,f)})}function e(a,b,c){var b={type:b.type},e;switch(b.type){case "im":var j=a.find("img").attr("alt");j&&(b.alt=j);case "sl":(j=a.children("a.cs-inserted").attr("href"))&&(b.href=j)}switch(b.type){case "im":e=a.data("filename");b.content=e||"";a.data("lastImageSrc",a.find("img").prop("src"));e=c.images;break;case "sl":b.content=
(b.href?a.children("a.cs-inserted"):a).html();e=c.singlelines;break;case "ml":b.content=a.html(),e=c.multilines}a.docmodel(b);e.push(b)}var c={build:function(){var c=a("#templateiframe").contents(),f={repeaters:[],images:[],singlelines:[],multilines:[]};this.docmodel(f);c.find(".cs-fl-wrap[data-model]").each(function(b,c){var d=a(c);e(d,d.data("model"),f)});c.find(".cs-rp-wrap[data-model]").each(function(c,d){var e=a(d);e.parents(".cs-rp-wrap").length||b(e,f.repeaters)});return f}};a.fn.docmodel=
function(){return this.apply(arguments,c,function(a){if(a)this.data("docmodel",a);else return this.data("docmodel")})}})(jQuery);(function(a){function b(b,c){b.bind("inserted",function(){var d;if(CKEDITOR.env.isCompatible){d=CKEDITOR.appendTo(b.get(0),CS.Editor.ckConfig,c);b.data("ckeditor",d);var f=function(){b.closest("#editorPane").trigger("sizeChanged")};d.on("instanceReady",function(){f();setTimeout(f,100)});d.on("resize",f)}else b.eq(0).append(a("<textarea />",{text:c}))})}a.multiline=function(e){var c=a("#multiline-template").tmpl({label:e.region.label});b(c,e.linkedElement.html());return c}})(jQuery);(function(a){a.singleline=function(b){var e=b.linkedElement,c=e.find(">a.cs-inserted"),e=(c.length?c:e).html();return a("#singleline-template").tmpl({label:b.region.label,content:e==="&nbsp;"?"":e})}})(jQuery);(function(a){function b(b){b.find("input[type=file]").change(function(b){var d=a(this),e=d.val().split(/(\\|\/)/g),e=e[e.length-1],f=CS.reformatImageFilename(e),h=d.editor("linkedElement"),m=d.editor("section"),n;if(a.browser.msie){if((n=m.data("lastchange"))&&b.timeStamp-n<100)return;m.data("lastchange",b.timeStamp)}CS.isValidImage(e)?(d.trigger("dirty"),m.find(".fileName").html(e).truncate({center:!0,width:180}),h.data("filename",f),d.trigger("save"),CS.hasFileAPI&&c(h.find("img"),d.get(0).files[0])):
d.trigger("failed")}).bind("uploading",function(){f(a(this).editor("section"),".uploadingContainer")}).bind("uploaded",function(b,c){var e=a(this),h=e.editor("section"),l;f(h,".uploadedContainer");h.find(".item:text").focus();h.trigger("scroll");if(!c)l=e.editor("linkedElement"),e=new Image,e.onload=function(){d(l.find("img"),this.src,{height:this.height,width:this.width})},e.src=CS.Editor.options.imagePrefix+l.data("filename")}).bind("failed",function(c,d){var e=a(this).editor("section").find(".validation-error"),
f=function(){b.trigger("sizeChanged")};b.trigger("remove-image");e.text(d||"Whoops! That's not an image file");e.fadeIn(200);f();setTimeout(function(){e.fadeOut(500,f)},1E4)});b.bind("remove-image",function(){var b=a(this),c=b.editor("linkedElement"),g=c.find("img"),h;c.data("displayfiller")?(h=c.data("fillerimage"),d(g,h,e(h))):(g.hide(),h=g.prop("src"),h.startsWith("blob:")&&URL.revokeObjectURL(h));a.browser.msie&&(h=b.find("input[type=file]"),h.wrap("<form />"),h.closest("form")[0].reset(),h.unwrap());
g.prop("alt","");delete b.data("field").linkData;c.data("filename","");b.linkPreview();f(b,".fauxFile")})}function e(a){a=a.match(/(\d+)x(\d+)_fill\.gif$/i);return{width:a[1],height:a[2]}}function c(a,b){var c=URL.createObjectURL(b),f=new Image;f.onload=function(){var b=a.parent().data("fillerimage"),f;if(!a.is(":visible")||a.prop("src").endsWith(b))b=e(b),b.width<this.width?(f=b.width/this.width,b.height=this.height*f):b=this,d(a,c,b)};f.src=c}function d(a,b,c){var d=a.prop("src");a.show().prop({src:b,
height:c.height,width:c.width});d.startsWith("blob:")&&URL.revokeObjectURL(d)}function f(a,b){var c=a.find(b);a.find(".state-container").hide();CS.isIE(8)?c.css("display","block"):c.fadeIn(600).css("display","block")}a.image=function(c){var d=c.linkedElement,e=d.docmodel(),f=d.find("img"),d=e?e.content:d.data("filename"),e=e?e.alt:f.prop("alt"),c=a("#image-template").tmpl({label:c.region.label,content:e});b(c);a.browser.msie&&c.find(".chooseButton").addClass("ie");e&&c.find(".placeholder").hide();
d&&c.find("input[type=file]").trigger("uploaded",[!0]);return c}})(jQuery);(function(a){function b(b){var b=a(b.target),c;b.is("input[type=file]")?(c=function(b,c){return function(d){var e;b.data("save")===arguments.callee?(b.trigger("uploading"),e=b.editor("linkedElement"),b.postFile({url:CS.Editor.options.saveImageURL,complete:function(e){a(e).parseJson({onError:function(a){var c;a&&a.Errors&&a.Errors.Messages&&a.Errors.Messages.length&&(c=[a.Errors.Messages[0]]);b.trigger("failed",c)},onSuccess:function(){c.progress("stop");b.trigger("uploaded")}});c.progress("stop");
d()},additional:{Filename:e.data("filename"),Width:e.data("width")},progress:function(a){c.progress(typeof a==="string"?a:a.loaded/a.total)}})):d()}}(b,b.editor("section").find(".progressBar")),b.data("save",c)):(c=function(b){return function(c){a.ajax(CS.Editor.options.saveURL,{data:{content:b},dataType:"json",type:"POST"}).always(c).done(function(b){a(b).parseJson({onSuccess:e})})}}(JSON.stringify(b.docmodel("build"))),b.editor("dirty",!0));a(this).save("queue",c)}function e(a){j=a.Data;m.addClass("active");
g&&clearTimeout(g);g=setTimeout(c,300)}function c(){g=null;(function(b){a.get(CS.Editor.options.generationURL,{uniq:b},"json").done(function(d){a(d).parseJson({onSuccess:function(){if(!d.Data){var e=a("#previewiframe");e.attr("src",e.attr("src"))}b===j&&(d.Data?g=setTimeout(c,1E3):m.removeClass("active"))}})})})(j)}function d(){h(function(a){a.$parent.prepend(a.$item);a.$item.remove()})}function f(){var b=a(this);h(function(a){var c;a.$prev.length?(c=a.$prev,c.next(".cs-add-placeholder").remove(),
c.after(a.$item)):(c=a.$parent,c.children(":first").filter(".cs-add-placeholder").remove(),c.prepend(a.$item));a.$item.trigger("rebuildToc");a.wasEditing?a.$item.find(".cs-button-block").trigger("edit"):b.trigger("save")})}function h(a){var b=l.data("lastItem");b&&(clearTimeout(b.timeout),k.removeClass("undoable"),l.hide().removeData("lastItem"),a(b))}var i=!1,j,g,k,l,m,n={pending:function(a){return this.queue("save").length>0||!a&&i},queue:function(a){var b=this;this.queue("save",function(c){a(function(){b.save("pending",
!0)||(m.addClass("notsaving"),k.is(".undoable")?k.removeClass("undoable").hide():k.fadeOut(m.is(".active")?0:500),i=!1);c()})});i||(k.clearQueue().show(),m.removeClass("notsaving"),i=!0,b.dequeue("save"));return b}};a.extend(a.fn,{save:function(){return this.apply(arguments,n,function(){var c=a("#editorStatus");k=c.find(".save");m=c.find(".updating");l=a(".undo");m.addClass("notsaving");return this.bind("save",b).bind("undo",f).bind("cancelUndo",d)})},reorderAndDelete:function(b){return this.bind("delete",
function(c){var c=a(c.target).closest(".cs-button-block").itemgroup(),e=b.editor("currentItem"),f=c.parent(),g=c.first().prev(),e=e&&e[0]===c[0];d();e&&(b.editor("destroy"),b.trigger("hide"));k.addClass("undoable");l.show().data("lastItem",{$item:c,$parent:f,$prev:g,wasEditing:e});c.detach();f.trigger("rebuildToc");b.trigger("save");l.data("lastItem").timeout=setTimeout(d,1E4)}).bind("reorder",function(){d();b.trigger("save")}).bind("cancelUndo",d)}})})(jQuery);(function(a){function b(b,c,f){var b=a(c),c=b.data("field"),h=c.linkedElement,l=h.docmodel(),m,n,o;switch(c.region.type){case "sl":n=h.children("a.cs-inserted");n.length||(n=h);m=f?l.content:b.find("input.item").val();m=e(m);if(o=m!=n.html())n.html(m),c.region.tocTitle&&(n=h.toc("name"),a(".cs-toc-wrap a[href=#"+n+"]",h.get(0).ownerDocument).text(m));o=d(f?l:c.linkData,h)||o;break;case "ml":m=f?l.content:b.data("ckeditor")?b.data("ckeditor").getData():b.find("textarea").val();m=e(m);(o=h.html()!==
m)&&h.html(m);b.data("firstPoll")||(b.data("firstPoll",!0),o=!1);break;case "im":m=f?l.alt:b.find("input.item:text").val(),n=h.find("img"),n.prop("alt")!==m&&(o=!0,n.prop("alt",m)),m=h.data("lastImageSrc"),f&&n.prop("src")!==m&&(m.endsWith(h.data("fillerimage"))&&!h.data("displayfiller")&&n.hide(),n.prop("src",m)),o=d(f?l:c.linkData,h)||o}!f&&o&&b.trigger("dirty")}function e(a){f.html(a);f.find("script").remove();c(f,"cs-rp-wrap");c(f,"cs-it-wrap");c(f,"cs-el-wrap");c(f,"cs-fl-wrap");return f.html()}
function c(a,b){a.find("."+b).removeClass(b)}function d(a,b){var c=b.children("a.cs-inserted"),d;a&&a.href&&a.href.length>0?(c.length||(c=b.wrapInner('<a class="cs-inserted"/>').children("a.cs-inserted")),a.href!=c.attr("href")&&(c.attr("href",a.href),d=!0)):c.length&&(b.is("[data-fillerimage]")?c.children("img").unwrap():b.html(c.html()),d=!0);return d}var f=a("<div />"),h={destroy:function(){clearInterval(this.data("liveUpdateInterval"))},revert:function(){this.find(".editor-section").each(function(a,
c){b(a,c,!0)});return this}};a.fn.liveUpdate=function(){return this.apply(arguments,h,function(){this.data("liveUpdateInterval",setInterval(function(a){return function(){a.each(b)}}(this.find(".editor-section")),100))})}})(jQuery);(function(a,b){function e(b){return function(b){return function(d){var e=a(b).editor("section");if(d)e.data("field").linkData=d,e.linkPreview(),e.actions("visibility");c(e);e.trigger("sizeChanged")}}(b)}function c(a){a.is(".singleline-editor")&&a.find(".item").caret("end")}function d(a){a=a.editor("section").data("field");return Boolean(a&&a.linkData)}function f(b,c){a("#link-modal").modal("show",{data:b||null,onclose:c})}function h(a,c){a.data("action")&&clearTimeout(a.data("action"));a.data("action",
setTimeout(function(){c(a);a.data("action",b)},200))}function i(){var b=a(this),c=a("#editorHeader"),d,e,f;if(b.is("#insertMenu")){if(f=b.data("editor"))e=a(f.container.$).find(".cke_button_cs_insert"),d=e.offset().top,e=e.height()}else d=b.parent().offset().top,e=36,b.closest(".image-editor").length&&b.css("left",249);c.is(".fixed")&&d+e+b.height()>c.offset().top?(d-=b.height(),b.addClass("up")):(d+=e,b.removeClass("up"));b.css("top",d)}var j=[{selector:".link-add",click:function(){f(null,e(this))},
visible:function(){return!d(this)}},{selector:".ck-link-add",click:function(){a(this).trigger("insert")}},{selector:".link-edit",click:function(){f(a(this).editor("section").data("field").linkData,e(this))},visible:function(){return d(this)}},{selector:".link-remove",click:function(){var b=a(this).editor("section");delete b.data("field").linkData;b.linkPreview();c(b);b.trigger("sizeChanged")},visible:function(){return d(this)}},{selector:".image-remove",click:function(){a(this).editor("section").trigger("remove-image")}},
{selector:".field,.date,.cslink",click:function(){a(this).trigger("insert")}}],g={visibility:function(){var b=this;a.each(j,function(a,c){var d=b.find(c.selector);d.toggle(c.visible?c.visible.call(d):!0)})}};a.fn.actions=function(){return this.apply(arguments,g,function(){var b=this.find("a.actions"),c=this.find("ul.dropDown"),d=c.find("li"),e=c.find("li.flyOut");d.filter(".date").find("a").html(function(){return CS.Editor.getFormattedDateField(a(this).data("type"))});this.find("ul").dynamicWidth();
c.find("ul").each(function(b,c){var d=a(c);d.css("left",d.parents("ul:first").width())});c.bind("position",i);e.hover(function(){var b=a(this);b.addClass("active");h(b,function(a){a.children("ul").fadeIn(100)})},function(){var b=a(this);b.removeClass("active");h(b,function(a){a.children("ul").fadeOut(300)})});e.find("li:first-child").add(c.find("li:first-child")).addClass("first-row");e.find("li:last-child").add(c.find("li:last-child")).addClass("last-row");c.find("a").click(function(a){a.preventDefault()});
b.click(function(b){var c=a(this),d=a("#editorPane"),f=c.editor("section"),g=f.find("ul.dropDown");b.preventDefault();c.toggleClass("active");e.find(".stub.active").removeClass("active");e.find("ul").hide();c.is(".active")?(d.find(".scrollbar").addClass("disable"),g.fadeIn(100),g.trigger("position"),CS.isIE(7)&&g.is(".up")&&(f.data("originalZIndex",f.css("z-index")),f.css("z-index",f.data("originalZIndex")+10)),a.anyClick(function(){c.click()},b)):(CS.isIE(7)&&g.is(".up")&&f.css("z-index",f.data("originalZIndex")),
d.trigger("sizeChanged",["none"]),c.is(":visible")?g.fadeOut(300):g.hide(),a.anyClick())});a.each(j,function(b,c){d.filter(c.selector).click(function(){var b=a(this);b.is("a")||(b=b.find("a"));c.click.call(b[0]);b.editor("section").actions("visibility")})})})}})(jQuery);(function(a){function b(b,d){var e=a('<div class="editor-wrap" />'),h=900;a.each(b,function(b,c){var g,k={region:c,linkedElement:a(d[b])},l;switch(c.type){case "ml":g=a.multiline(k);break;case "sl":g=a.singleline(k);break;case "im":g=a.image(k)}if(l=(l=k.linkedElement.docmodel())?l.href:k.linkedElement.find("a.cs-inserted").attr("href"))k.linkData=CS.Editor.hrefToLinkData(l);g.data("field",k);g.linkPreview();g.actions("visibility");g.bind("insert",function(b){var c=a(b.target),b=a(this).find(".item"),
d=b.caret(),e=b.val(),c=c.parent().is(".date")?"<"+c.data("type")+" />":c.data("tag");d.end?e=e.substring(0,d.start)+c+e.substring(d.end):e+=c;b.val(e);b.caret("end")});CS.isIE(7)&&(g.css("zIndex",h),h-=1);e.append(g)});a.browser.msie&&e.find(".editor-section").addClass("ie");return e}var e={dirty:function(a){var b=this;if(a)b.data("dirty",!1).one("dirty",function(){b.data("dirty",!0)});else return a=b.editor("currentItem"),b.data("dirty")||a&&!a.docmodel()},confirmDestroy:function(a){a||this.trigger("save").editor("destroy");
return"Your latest changes haven't been saved yet."},destroy:function(b){if(b){var b=this.editor("currentItem"),d=b.parent();b.docmodel()?this.liveUpdate("revert"):(b.first().trigger("checkplaceholder"),b.remove(),d.trigger("resort"),d.find(".cs-add-placeholder").editButtons("position"));d.trigger("rebuildToc")}this.editor("currentItem",null);this.liveUpdate("destroy");a.each(CKEDITOR.instances,function(a,b){CKEDITOR.remove(b);b.destroy()});this.editor("dirty",!0);this.find("#editorContent").empty()},
section:function(){return this.closest(".editor-section")},linkedElement:function(){var b=this;b.is(".editor-section")||(b=b.editor("section"));b=b.data("field");return a(b&&b.linkedElement)},currentItem:function(a){if(a||a===null)this.data("currentItem",a);else return this.data("currentItem")},build:function(a){var d=this,e=d.find("#editorContent"),h;d.editor("destroy");if(d.length==1){h=b(a.regions,a.elements);d.editor("currentItem",a.item);e.append(h).actions();e.find(".multiline-editor").trigger("inserted");
d.liveUpdate();d.trigger("sizeChanged");e=e.find(".editor-section:not(.image-editor):first");if(e.is(".multiline-editor"))if(CS.isMobile)e.find("textarea").caret("end");else e.data("ckeditor").on("instanceReady",function(a){a.editor.focus()});else e.is(".singleline-editor")&&(a.item.docmodel()?e.find(".item").caret("end"):e.find(".item").caret(0,"end"));h.delegate("input[type=text]","keyup",function(a){a.which===13&&d.find(".saveButton").click()})}return d}};a.fn.editor=function(){return this.apply(arguments,
e,function(b){function d(a){a=a.itemgroup();return{item:a,regions:a.itemgroup("wrapper").layout().regions,elements:a.find(".cs-el-wrap")}}function e(a){a=a.prev(".cs-fl-wrap");return{item:a,regions:[a.data("model")],elements:a}}b.bind("hide",function(){b.toggleClass("active idle")});this.bind("edit",function(h){var i=b.editor("currentItem");if(!i||!i.has(h.target).length)if(!b.editor("dirty")||b.editor("confirmDestroy"))b.is(".idle")&&b.toggleClass("active idle"),h=a(h.target).closest(".cs-button-block"),
h.trigger("cancelUndo"),a(h.get(0).ownerDocument).scrollTo(h,{duration:500,easing:"easeInOutCubic",offset:{top:-75}}),b.editor("build",h.prev(".cs-fl-wrap").length?e(h):d(h))})})}})(jQuery);(function(a){function b(){var b=a(this);setTimeout(function(){var c=b.attr("title");!b.val()||b.val()==c?(b.prev("span").css("visibility",""),c&&(c=a("<label></label>").text(c).css("visibility","hidden").appendTo("body"),b.prev("span").css("margin-left",c.width()+3+"px"),c.remove())):b.prev("span").css("visibility","hidden")},0)}a("input, textarea").live("keydown",b);a("input, textarea").live("paste",b);a("select").live("change",b);a("input, textarea").live("focusin",function(){a(this).prev("span").css("color",
"#ccc")});a("input, textarea").live("focusout",function(){a(this).prev("span").css("color","#999")});a(function(){a("input, textarea").each(function(){b.call(this)})})})(jQuery);(function(a){a.extend(CKEDITOR.editor.prototype,{getSelectedLink:function(){try{var a=this.getSelection();if(a.getType()==CKEDITOR.SELECTION_ELEMENT){var e=a.getSelectedElement();if(e.is("a"))return e}var c=a.getRanges(!0)[0];c.shrink(CKEDITOR.SHRINK_TEXT);return c.getCommonAncestor().getAscendant("a",!0)}catch(d){return null}},insertLink:function(b,e,c){var d=c||(b.email?b.email.address:b.href),f;a.browser.msie&&this.focus();f=this.getSelectedLink();e=a.extend(e||{},{href:b.href,"data-cke-saved-href":b.href});
if(f){var h=f.data("cke-saved-href"),i=f.getHtml();f.setAttributes(e);(c||h===i||b.email&&i.indexOf("@")!==-1)&&f.setHtml(d)}else c=(b=this.getSelection())?b.getRanges(!0):[{collapsed:!0}],c.length===1&&c[0].collapsed?this.insertHtml(a("<a />",e).html(d).wrap("<span />").parent().html()):(e=new CKEDITOR.style({element:"a",attributes:e}),e.type=CKEDITOR.STYLE_INLINE,e.apply(this.document),c=this.getSelection().getRanges(),a.each(c,function(a,b){b.collapse()}),b.selectRanges(c))}});CKEDITOR.plugins.add("link",
{init:function(a){a.addCommand("link",new CKEDITOR.linkCommand);a.addCommand("unlink",new CKEDITOR.unlinkCommand);a.ui.addButton("Link",{label:a.lang.link.toolbar,command:"link"});a.ui.addButton("Unlink",{label:a.lang.unlink,command:"unlink"});a.on("selectionChange",function(e){var c=a.getCommand("unlink");(e=e.data.path.lastElement&&e.data.path.lastElement.getAscendant("a",!0))&&e.getName()=="a"&&e.getAttribute("href")?c.setState(CKEDITOR.TRISTATE_OFF):c.setState(CKEDITOR.TRISTATE_DISABLED)});a.on("doubleclick",
function(e){var c=a.getSelectedLink()||e.data.element;!c.isReadOnly()&&c.is("a")&&(a.getCommand("link").exec(a),e.stop())});a.addMenuItems&&a.addMenuItems({link:{label:a.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:a.lang.unlink,command:"unlink",group:"link",order:5}});a.contextMenu&&a.contextMenu.addListener(function(e){return!e||e.isReadOnly()||!a.getSelectedLink()?null:{link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}})},afterInit:function(a){var e=a.dataProcessor;
(e=e&&e.dataFilter)&&e.addRules({elements:{a:function(c){var d=c.attributes;if(d.name&&!d.href)return a.createFakeParserElement(c,"cke_anchor","anchor")}}})},requires:["fakeobjects"]});CKEDITOR.linkCommand=function(){};CKEDITOR.linkCommand.prototype={exec:function(b,e){var c=b.getSelectedLink(),d=c?a(c.$):null;c&&d.is("[class|=cs-editor]")?(e||b.execCommand("cs_insert"),d.is(".cs-editor-fblike")&&a("#insertMenu").find(".like a").trigger("insert",[d.data("likeurl")])):a("#link-modal").modal("show",
{data:c?CS.Editor.hrefToLinkData(c.data("cke-saved-href")):null,onclose:function(a){a&&b.insertLink(a);b.focus()}})}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function(a){for(var e=a.getSelection(),c=e.createBookmarks(),d=e.getRanges(),f,h=0;h<d.length;h++)f=d[h].getCommonAncestor(!0),(f=f.getAscendant("a",!0))&&d[h].selectNodeContents(f);e.selectRanges(d);a.document.$.execCommand("unlink",!1,null);e.selectBookmarks(c)},startDisabled:!0}})(jQuery);(function(a,b){function e(a,b){var c=b.data("content");a.insertLink({href:b.data("url")},{"class":"cs-editor-"+b.data("type")},c||b.text())}function c(b,c){var e,i;c.parent(".field").length?(e=c.data("tag"),i=e!=="[email]"):e="<"+c.data("type")+">";b.insertText(e);i&&(e=b.getSelection(),i=e.getRanges(),i[0].startOffset-=1,i[0].endOffset-=1,e.selectRanges(i),a.browser.msie&&b.focus())}CKEDITOR.plugins.add("insert",{init:function(d){d.addCommand("cs_insert",{exec:function(d){var h=a("#insertMenu");
h.unbind("insert.cked");h.data("editor")===d&&h.is(":visible")?(a("#editorPane").trigger("sizeChanged",["none"]),h.fadeOut(300).data("editor",null),h.find(".stub.active").removeClass("active"),h.find("ul").hide(),a.anyClick()):(h.data("editor",d).trigger("position").fadeIn(100),a("#editorPane").find(".scrollbar").addClass("disable"),h.one("insert.cked",function(h,j){var g=a(h.target),k=g.parent();k.is(".ck-link-add")?d.execCommand("link",!0):k.is(".like")?a("#like-modal").modal("show",{data:j?{href:j}:
b,onclose:function(a){var c={"class":"cs-editor-fblike"};if(a!==b){if(a&&a.href)c["data-likeurl"]=a.href;d.insertLink({href:g.data("url")},c,g.data("content"))}}}):k.is(".cslink")?e(d,g):c(d,g)}),setTimeout(function(){a.anyClick(function(a){return function(){a.execCommand("cs_insert")}}(d))},100))}});d.ui.addButton&&d.ui.addButton("Insert",{label:"Insert",command:"cs_insert",hasArrow:!0})}})})(jQuery);(function(){function a(a){a.cancel()}function b(b,c,d){var e=this.document;if(!e.getById("cke_pastebin")){if(c=="text"&&b.data&&b.data.$.clipboardData){var g=b.data.$.clipboardData.getData("text/plain");if(g){b.data.preventDefault();d(g);return}}var k=this.getSelection(),b=new CKEDITOR.dom.range(e),l=new CKEDITOR.dom.element(c=="text"?"textarea":CKEDITOR.env.webkit?"body":"div",e);l.setAttribute("id","cke_pastebin");CKEDITOR.env.webkit&&l.append(e.createText("\u00a0"));e.getBody().append(l);l.setStyles({position:"absolute",
top:k.getStartElement().getDocumentPosition().y+"px",width:"1px",height:"1px",overflow:"hidden"});l.setStyle(this.config.contentsLangDirection=="ltr"?"left":"right","-1000px");var m=k.createBookmarks();this.on("selectionChange",a,null,null,0);c=="text"?l.$.focus():(b.setStartAt(l,CKEDITOR.POSITION_AFTER_START),b.setEndAt(l,CKEDITOR.POSITION_BEFORE_END),b.select(!0));var n=this;window.setTimeout(function(){var f;c=="text"&&CKEDITOR.env.gecko&&n.focusGrabber.focus();l.remove();n.removeListener("selectionChange",
a);var b;f=CKEDITOR.env.webkit&&(b=l.getFirst())&&b.is&&b.hasClass("Apple-style-span")?b:l,l=f;k.selectBookmarks(m);d(l["get"+(c=="text"?"Value":"Html")]())},0)}}function e(a){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var b=a.getSelection(),c;if(b.getType()==CKEDITOR.SELECTION_ELEMENT&&(c=b.getSelectedElement())){var d=b.getRanges()[0],e=a.document.createText("");e.insertBefore(c);d.setStartBefore(e);d.setEndAfter(c);b.selectRanges([d]);setTimeout(function(){c.getParent()&&(e.remove(),b.selectElement(c))},
0)}}}var c=function(a){if(this.mode=="wysiwyg")switch(a.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:var b=this.document.getBody();!CKEDITOR.env.ie&&b.fire("beforepaste")?a.cancel():(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900)&&b.fire("paste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:var c=this;this.fire("saveSnapshot");setTimeout(function(){c.fire("saveSnapshot")},0)}},d;CKEDITOR.plugins.add("clipboard",{requires:["dialog","htmldataprocessor"],init:function(a){a.on("paste",
function(b){b=b.data;b.html?a.insertHtml(b.html):b.text&&a.insertText(b.text);setTimeout(function(){a.fire("afterPaste")},0)},null,null,1E3);a.on("pasteDialog",function(){setTimeout(function(){a.openDialog("paste")},0)});a.on("pasteState",function(b){a.getCommand("paste").setState(b.data)});CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));a.on("key",c,a);a.on("contentDom",function(){var c=a.document.getBody();c.on(CKEDITOR.env.webkit?"paste":"beforepaste",function(c){if(!d){var e=
{mode:"html"};a.fire("beforePaste",e);b.call(a,c,e.mode,function(b){if(b=CKEDITOR.tools.trim(b.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,""))){var c={};c[e.mode]=b;a.fire("paste",c)}})}});c.on("contextmenu",function(){d=1;setTimeout(function(){d=0},10)});c.on("beforecut",function(){!d&&e(a)})})}})})();(function(){this.inherit=function(a){a.jQueryInherit=this.jQuery;a.jQueryInherit.fn.ready=function(b){a.jQueryInherit.hooks.bindReady();a.jQueryInherit.hooks.isReady?b.call(a.document,a.jQueryInherit):a.jQueryInherit.hooks.readyList.push(b);return this};a.jQueryInherit.hooks={isReady:!1,readyBound:!1,readyList:[],bindReady:function(){if(!a.jQueryInherit.hooks.readyBound)a.jQueryInherit.hooks.readyBound=!0,a.document.addEventListener?a.document.addEventListener("DOMContentLoaded",function(){a.document.removeEventListener("DOMContentLoaded",
arguments.callee,!1);a.jQueryInherit.hooks.ready()},!1):a.document.attachEvent&&(a.document.attachEvent("onreadystatechange",function(){a.document.readyState==="complete"&&(a.document.detachEvent("onreadystatechange",arguments.callee),a.jQueryInherit.hooks.ready())}),a.document.documentElement.doScroll&&a==a.top&&function(){if(!a.jQueryInherit.hooks.isReady){try{a.document.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}a.jQueryInherit.hooks.ready()}}()),jQuery.event.add(a,
"load",a.jQueryInherit.hooks.ready)},ready:function(){if(!a.jQueryInherit.hooks.isReady){a.jQueryInherit.hooks.isReady=!0;if(a.jQueryInherit.hooks.readyList)jQuery.each(a.jQueryInherit.hooks.readyList,function(){this.call(a.document,a.jQueryInherit)}),a.jQueryInherit.hooks.readyList=null;jQuery(a.document).triggerHandler("ready")}}};return a.jQuery=a.$=function(b,e){return b.constructor.toString().match(/Function/)!=null?a.jQueryInherit.fn.ready(b):a.jQueryInherit.fn.init(b||this.document,e||this.document)}}})(jQuery);(function(a,b){function e(){if(f)if(a.isSafari&&!j)templateiframe.onload=e,j=!0;else{var c=b("#templateiframe");c.show();d=c.contents();d.blocklinks();d.editor(f);d.addNew(f);d.sort();d.reorderAndDelete(f);d.toc();d.editButtons();f.docmodel("build");b("#editorStatus .load").fadeOut(500)}else setTimeout(e,100)}function c(){b(window).bind("beforeunload",function(){if(f.editor("dirty"))return f.editor("confirmDestroy",!0);else if(f.save("pending"))return"We're still saving your latest changes. Please wait until these changes have been saved"});
b("#previewiframe").load(function(){b(this).contents().blocklinks()});b(document).controls().tabIndex();f.save();f.actions();b(".modal").modal();f.bind("save",function(){d.editButtons("position")})}var d,f,h=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],j=!1;a.Editor={getFilename:function(a){return a.startsWith("data:")?void 0:a.split("/").pop()},getFormattedDateField:function(a){var b=
new Date,c,d;switch(a){case "currentday":c=b.getDate();d="Current day";break;case "currentdayname":c=i[b.getDay()];d="Current day name";break;case "currentmonth":c=b.getMonth()+1;d="Current month";break;case "currentmonthname":c=h[b.getMonth()];d="Current month name";break;case "currentyear":c=b.getFullYear(),d="Current year"}return d+' <span class="dateAlt">('+c+")</span>"},hrefToLinkData:function(a){var c={href:a};if(a.startsWith("mailto:"))a=a.split(":",2)[1].split("?",2),c.email={address:a[0]},
a.length>1&&(a=a[1].split("&"),b.each(a,function(a,b){b=b.split("=");b.length===2&&(c.email[b[0]]=decodeURIComponent(b[1]))}));return c},editorReady:function(d){a.Editor.options=d;f=b("#editorPane");f.tinyscrollbar().bind("scrollbarVisibility",function(a,b){f.find("#editorHeader").toggleClass("fixed",b)});a.isIE(7)&&f.find("#editorHeader").addClass("ie");c()},templateReady:e,ckConfig:{customConfig:"",resize_dir:"vertical",height:"150px",width:"370px",autoGrow_minHeight:150,autoGrow_maxHeight:600,
autoGrow_absoluteMax:600,autoGrow_onStartup:!0,skin:"cs",toolbarCanCollapse:!1,colorButton_enableMore:!1,forcePasteAsPlainText:!0,fontSize_sizes:"8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px",extraPlugins:"insert,autogrow",removePlugins:"elementspath,about,smiley,filebrowser,templates,forms,flash,div,find,format,horizontalrule,iframe,maximize,newpage,pagebreak,preview,print,save,image,stylescombo,pastefromword,scayt",toolbar:[["Bold","Italic","JustifyLeft","JustifyCenter",
"JustifyRight","TextColor","FontSize","-","NumberedList","BulletedList","-","Insert","Source"]]}}})(window.CS=window.CS||{},jQuery);
